package exercise;

/**
 * @Author : Ze Li
 * @Date : 28/07/2025 14:49
 * @Version : V1.0
 * @Description :
 */
public class FlattenAMultilevelDoublyLinkedList430 {
    class Node {
        public int val;
        public Node prev;
        public Node next;
        public Node child;
    };
    class Solution {
        public Node flatten(Node head) {
            flattenNode(head);
            return head;
        }

        private Node flattenNode(Node head) {
            while (true) {
                if (head.child != null) {
                    Node lastNode = flattenNode(head.child);
                    Node temp = head.next;
                    head.next = head.child;
                    head.child.prev = head;
                    head.child = null;
                    lastNode.next = temp;
                    if (temp != null) temp.prev = lastNode;
                }
                if (head.next == null) return head;
                head = head.next;
            }
        }
    }
}
